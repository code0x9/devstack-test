[[local|localrc]]

# -------------------------
# 1. Credentials
# -------------------------
ADMIN_PASSWORD=secret
DATABASE_PASSWORD=$ADMIN_PASSWORD
RABBIT_PASSWORD=$ADMIN_PASSWORD
SERVICE_PASSWORD=$ADMIN_PASSWORD

# The default network interface to bridge/interface with external traffic
# Replace eth0 with your actual host interface name (e.g., eth0, enp0s3, or eth1)
HOST_IP=172.16.146.128
FLAT_INTERFACE=enp2s0

# -------------------------
# 2. Neutron/OVN Configuration
# -------------------------

# Set the Neutron agent to OVN
Q_AGENT=ovn

# Enable the OVN DevStack plugin (required to pull in OVN code)
enable_plugin networking-ovn https://opendev.org/openstack/networking-ovn

# Enable the OVN services
# ovn-northd: The OVN central controller
# ovn-controller: The OVN service on the hypervisor
# q-ovn-metadata-agent: The metadata service OVN uses
enable_service ovn-northd
enable_service ovn-controller
enable_service q-ovn-metadata-agent

# Disable the conflicting OVS-based L2/L3/DHCP agents
# This is the key fix for the error you reported (q-agt, q-l3 are OVS agents)
disable_service q-agt
disable_service q-l3
disable_service q-dhcp
disable_service q-meta

# -------------------------
# 3. Development/Speed Tweaks
# -------------------------

# Enable Horizon for the web interface (optional, but highly recommended)
enable_service horizon

# Log Configuration for easy debugging
LOGFILE=$DEST/logs/stack.sh.log
VERBOSE=True
LOG_COLOR=True
SCREEN_LOGDIR=$DEST/logs
